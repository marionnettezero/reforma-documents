# フェーズ4: 動作確認チェックリスト

## 確認日時
実施日: _______________
実施者: _______________

## タスク5-1: 詳細カスタマイズUIの確認

### 確認項目

- [ ] **カスタムテーマ選択時に「コンテンツ領域」の設定項目が表示される**
  - フォーム編集ページにアクセス
  - テーマ設定で「カスタム」を選択
  - 「詳細カスタマイズ」セクションに「コンテンツ領域」のアコーディオンが表示されることを確認
  - 期待結果: 「コンテナ」の後に「コンテンツ領域」が表示される

- [ ] **「コンテンツ領域」の設定項目でスタイルを変更できる**
  - 「コンテンツ領域」のアコーディオンを開く
  - 背景色を変更（例: `#f0f0f0`）
  - 文字色を変更（例: `#333333`）
  - その他のスタイル（パディング、マージンなど）を変更
  - 期待結果: 各スタイル項目が正しく変更できる

- [ ] **設定したスタイルがリアルタイムプレビューに反映される**
  - スタイルを変更した後、リアルタイムプレビューを確認
  - コンテンツ領域（フィールド表示エリア）に設定したスタイルが反映されていることを確認
  - 期待結果: リアルタイムプレビューに即座に反映される

### 確認結果
- 合格 / 不合格
- 備考: 

---

## タスク5-2: コンテンツ領域のスタイル適用確認

### 確認項目

- [ ] **コンテンツ領域のスタイル（背景色、文字色など）が正しく適用される**
  - カスタムテーマで「コンテンツ領域」の背景色を設定（例: `#ffffff`）
  - 文字色を設定（例: `#000000`）
  - 公開フォーム表示ページで確認
  - 期待結果: 設定したスタイルが正しく適用されている

- [ ] **`theme_tokens`のスタイルが`custom_style_config`のスタイルで上書きされる**
  - プリセットテーマ（例: 「ダーク」）を選択して`theme_tokens`を確認
  - その後、カスタムテーマに切り替えて「コンテンツ領域」のスタイルを設定
  - 公開フォーム表示ページで確認
  - 期待結果: `custom_style_config`のスタイルが`theme_tokens`のスタイルを上書きしている

- [ ] **リアルタイムプレビューでも正しく反映される**
  - フォーム編集ページのリアルタイムプレビューで確認
  - 「コンテンツ領域」のスタイルを変更
  - 期待結果: リアルタイムプレビューに即座に反映される

- [ ] **公開フォーム表示ページでも正しく反映される**
  - フォームを保存して公開
  - 公開フォーム表示ページにアクセス
  - 期待結果: 設定したスタイルが正しく適用されている

### 確認結果
- 合格 / 不合格
- 備考: 

---

## タスク5-3: エッジケースの確認

### 確認項目

- [ ] **`custom_style_config`が存在しない場合、`theme_tokens`が正しく適用される**
  - プリセットテーマ（例: 「ダーク」）を選択
  - `custom_style_config`を設定しない
  - 公開フォーム表示ページで確認
  - 期待結果: `theme_tokens`のスタイルが正しく適用されている

- [ ] **`custom_style_config`を削除した場合、`theme_tokens`が再適用される**
  - カスタムテーマで「コンテンツ領域」のスタイルを設定
  - その後、プリセットテーマに戻す（`custom_style_config`を削除）
  - 公開フォーム表示ページで確認
  - 期待結果: `theme_tokens`のスタイルが再適用されている

- [ ] **`custom_style_config`と`theme_tokens`を同時に変更した場合、正しく動作する**
  - プリセットテーマを選択
  - その後、カスタムテーマに切り替えて「コンテンツ領域」のスタイルを設定
  - 公開フォーム表示ページで確認
  - 期待結果: `custom_style_config`のスタイルが優先される

- [ ] **`custom_style_config`が後から設定された場合、既存の`theme_tokens`のスタイルが削除される**
  - プリセットテーマを選択してフォームを表示
  - その後、カスタムテーマに切り替えて「コンテンツ領域」のスタイルを設定
  - 公開フォーム表示ページで確認
  - 期待結果: 既存の`theme_tokens`のCSS変数とインラインスタイルが削除され、`custom_style_config`のスタイルが適用される

### 確認結果
- 合格 / 不合格
- 備考: 

---

## 技術的な確認項目

### DOM要素の確認

- [ ] **`data-custom-style="content"`属性が設定されている**
  - ブラウザの開発者ツールで確認
  - `PublicFormViewPage.tsx`の1297行目: `<div data-form-theme data-custom-style="content">`
  - `FormRealtimePreview.tsx`の548行目: `<div data-form-theme data-custom-style="content">`
  - 期待結果: 属性が正しく設定されている

- [ ] **CSS変数が削除されている**
  - `custom_style_config`が存在する場合、`data-form-theme`要素からCSS変数（`--color-primary`など）が削除されていることを確認
  - ブラウザの開発者ツールで確認
  - 期待結果: CSS変数が削除されている

- [ ] **インラインスタイルがクリアされている**
  - `custom_style_config`が存在する場合、`data-form-theme`要素から`background-color`と`color`のインラインスタイルが削除されていることを確認
  - ブラウザの開発者ツールで確認
  - 期待結果: インラインスタイルがクリアされている

- [ ] **`custom_style_config`のスタイルが適用されている**
  - `data-custom-style="content"`要素に、設定したスタイルが適用されていることを確認
  - ブラウザの開発者ツールで確認
  - 期待結果: 設定したスタイルが正しく適用されている

### コンソールエラーの確認

- [ ] **JavaScriptエラーがない**
  - ブラウザのコンソールを確認
  - 期待結果: エラーが発生していない

- [ ] **Reactの警告がない**
  - ブラウザのコンソールを確認
  - 期待結果: 警告が発生していない

---

## 総合評価

### 確認結果のまとめ

- **タスク5-1**: 合格 / 不合格
- **タスク5-2**: 合格 / 不合格
- **タスク5-3**: 合格 / 不合格

### 発見した問題

1. 
2. 
3. 

### 修正が必要な項目

1. 
2. 
3. 

### 最終評価

- **全体評価**: 合格 / 不合格
- **備考**: 

---

## 確認環境

- **ブラウザ**: 
- **OS**: 
- **バージョン**: 
