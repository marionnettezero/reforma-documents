# ADR-0007: 全文検索インデックス

**Status:** Proposed  
**Date:** 2026‑01‑14

## Context

`notes`検索仕様書には、`notes`全体で包括的なテキスト検索を可能にする`FULLTEXT_future`インデックスの導入が示唆されています【219090252433354†L245-L246】。現在、検索クエリは単純なフィルタに依存しており、大きなテキストフィールドでは性能が良くない可能性があります。

## Decision

ノートコンテンツをインデックス化し、高度な検索機能をサポートするため、全文検索エンジン（例：PostgreSQL `tsvector`、ElasticSearch、またはMeiliSearch）の評価と採用を提案します。選択されたエンジンは、既存の永続化レイヤーと統合し、フレーズ検索、ファジーマッチング、ランキングなどのクエリを許可する必要があります。

## Consequences

- **UXの向上:** ユーザーはノートをより直感的かつ効果的に検索できるようになります。
- **運用オーバーヘッド:** 追加サービスのデプロイと管理、またはデータベース機能の有効化が必要です。インフラコストが増加する可能性があります。
- **移行:** 既存データをインデックス化する必要があります。検索APIエンドポイントは、新しいクエリパラメータをサポートし、ランク付けされた結果を返す必要があります。
