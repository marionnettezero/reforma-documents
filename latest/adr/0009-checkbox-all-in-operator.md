# ADR-0009: チェックボックスフィルタの"all_in"演算子

**Status:** Proposed  
**Date:** 2026‑01‑14

## Context

チェックボックスフィルタは現在`any_in`演算子をサポートしていますが、`all_in`演算子は将来の拡張としてマークされています【219090252433354†L305-L309】。ユーザーは、選択されたすべての値に一致するレコードをフィルタリングする必要がある場合があります。

## Decision

チェックボックスフィルタの`all_in`演算子を実装することを提案します。指定された場合、バックエンドは、関連する配列フィールドに選択されたすべてのオプションが含まれているレコードを返します。この機能は、エンドポイントごとにオプトインで、API仕様書に文書化する必要があります。

## Consequences

- **フィルタリングの強化:** より正確なクエリを可能にし、ユーザーの生産性を向上させます。
- **複雑なクエリ:** 性能を維持するため、高度なインデックス化（例：PostgreSQLのGINインデックス）が必要になる可能性があります。
- **UIの更新:** フロントエンドは、該当する場合、ユーザーが`any`と`all`の選択モードを選択できるようにする必要があります。
